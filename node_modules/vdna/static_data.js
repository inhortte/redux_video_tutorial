// -----------------------------------
// { categoryName:
//   { interestName:
//     { source: 'facebook',
//       clicks: 5,
//       added: Date.now() },
//     ...
// -----------------------------------

'use strict';

Array.prototype.add = function (arr) {
  var res = [];
  for (var i = 0; i < this.length || i < arr.length; i++) {
    if (this[i] === undefined) {
      res.push(arr[i]);
    } else if (arr[i] === undefined) {
      res.push(this[i]);
    } else {
      res.push(this[i] + arr[i]);
    }
  };
  return res;
};

module.exports = {
  staticInterests: {
    music: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: true,
      related: 'rock music,jazz,concerts,opera' },
    "french actors": { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'drama,film' },
    actors: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'czech film, film' },
    spirituality: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'literature,music' },
    "czech film": { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'film,actors' },
    "rock music": { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'music' },
    "world music": { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'music' },
    jazz: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: true,
      related: 'music' },
    technology: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'health,science' },
    health: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: true,
      related: 'science,dental' },
    dental: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'health' },
    comics: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'humor,literature' },
    humor: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'actors,literature' },
    literature: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'theater,comics' },
    science: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'technology,health' },
    drama: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'theater,film,literature' },
    theater: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'drama,literature,opera' },
    film: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'drama,literature,comics' },
    concerts: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'music,theater' },
    "contemporary art": { source: 'ticketpro', clicks: 0, added: Date.now(), selected: true,
      related: 'literature,film,theater' },
    opera: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'music,theater' },
    fitness: { source: 'ticketpro', clicks: 0, added: Date.now(), selected: false,
      related: 'health,science' }
  },

  arbitraryBinMapping: {
    "music": "1000000000000000000000000000000000000",
    "french actors": "10000000000000000000000000000000000000",
    "actors": "100000000000000000000000000000000000000",
    "la rioja": "1000000000000000000000000000000000000000",
    "castille y leÃ³n": "10000000000000000000000000000000000000000",
    "spain": "100000000000000000000000000000000000000000",
    "spirituality": "1000000000000000000000000000000000000000000",
    "rio": "10000000000000000000000000000000000000000000",
    "czech film": "100000000000000000000000000000000000000000000",
    "rock music": "1000000000000000000000000000000000000000000000",
    "jazz": "10000000000000000000000000000000000000000000000",
    "technology": "100000000000000000000000000000000000000000000000",
    "health": "1000000000000000000000000000000000000000000000000",
    "dental": "10000000000000000000000000000000000000000000000000",
    "comics": "100000000000000000000000000000000000000000000000000",
    "humor": "1000000000000000000000000000000000000000000000000000",
    "literature": "10000000000000000000000000000000000000000000000000000",
    "science": "100000000000000000000000000000000000000000000000000000",
    "drama": "1000000000000000000000000000000000000000000000000000000",
    "theater": "10000000000000000000000000000000000000000000000000000000",
    "film": "100000000000000000000000000000000000000000000000000000000",
    "concerts": "1000000000000000000000000000000000000000000000000000000000",
    "contemporary art": "10000000000000000000000000000000000000000000000000000000000",
    "opera": "100000000000000000000000000000000000000000000000000000000000",
    "fitness": "1000000000000000000000000000000000000000000000000000000000000"
  },

  privacySlider: 3,
  power: true,
  info_balloon: false,
  facebookConnect: false,
  pinterestConnect: false,

  // ---- settings
  // for sorting: 0: vdna off
  //              1: sorted vdnaclass divs
  //              2: unsorted vdnaclass divs
  //              3: sorted and truncated vdnaclass divs
  //              4: unsorted but truncated vdnaclass divs
  autosave: true,
  sorting: 1,
  truncateLength: 10, // Static for now.

  reverseBinMapping: function reverseBinMapping() {
    var that = this;
    return Object.keys(this.arbitraryBinMapping).reduce(function (rMap, key) {
      rMap[that.arbitraryBinMapping[key]] = key;
      return rMap;
    }, {});
  },

  // --- everything must be split into two 32 bit thurks.
  arbitraryDecMapping: function arbitraryDecMapping() {
    var that = this;
    return Object.keys(this.arbitraryBinMapping).reduce(function (dMap, key) {
      dMap[key] = that.binStringArrToDecArr(that.binStringSplit(32, that.arbitraryBinMapping[key]));
      return dMap;
    }, {});
  },

  // --- helper monkeys (cookies)

  powOf2Arr: function powOf2Arr(i) {
    var arr = [];
    for (var j = 0; j < i; j++) {
      arr.push(Math.pow(2, j));
    };
    return arr;
  },

  // --- split into n (32 for now) bit trozos.
  binStringSplit: function binStringSplit(n, binString) {
    var remString = binString;
    var trozos = [];
    while (remString.length > n) {
      trozos.unshift(remString.substr(remString.length - n));
      remString = remString.substr(0, remString.length - n);
    };
    trozos.unshift(remString);
    return trozos;
  },

  binStringToDec: function binStringToDec(binString) {
    var powArr = this.powOf2Arr(binString.length).reverse();
    var acc = 0;
    for (var i = 0; i < binString.length; i++) {
      acc += powArr[i] * parseInt(binString.charAt(i));
    };
    return acc;
  },

  binStringArrToDecArr: function binStringArrToDecArr(binStringArr) {
    var that = this;
    return binStringArr.map(function (binString) {
      return that.binStringToDec(binString);
    });
  },

  // Esto solo funciona con integrales positivos.
  decToBinString: function decToBinString(dec) {
    if (dec === undefined) {
      return "0";
    }
    var binString = "";
    while (dec >= 1) {
      binString = (dec % 2).toString() + binString;
      dec = Math.floor(dec / 2);
    };
    return binString;
  },

  // --- end helper monkeys

  //----------------------
  // In: [Keyword, ....], mapping
  // Out: {binString: "1000000.....", dec: 78210...}
  //----------------------
  interestsToBinStringAndDec: function interestsToBinStringAndDec(keywordArr, mapping) {
    var that = this;
    return keywordArr.map(function (keyword) {
      return mapping[keyword];
    }).reduce(function (culmination, binString) {
      var dec;
      if (binString === undefined) {
        dec = dec;
      } else {
        dec = culmination['dec'] + that.binStringToDec(binString);
      }
      culmination['binString'] = that.decToBinString(dec);
      culmination['dec'] = dec;
      return culmination;
    }, { binString: "", dec: 0 });
  },

  // -----------------------
  // In [Keyword, ....] (to DecArr) mapping.
  // Out: {binString: "10000...", decArr: [ 4194304, 0 ] (example)}
  interestsToDecArr: function interestsToDecArr(interestsArr, mapping) {
    var _mapping = mapping === undefined ? this.arbitraryDecMapping() : mapping;
    return interestsArr.map(function (interest) {
      return _mapping[interest.toLowerCase()];
    }).reduce(function (culmination, decArr) {
      if (decArr !== undefined) {
        culmination = culmination.add(decArr);
      }
      return culmination;
    }, [0]);
  },

  tallyExtraInterests: function tallyExtraInterests(interestsArr, mapping) {
    var _mapping = mapping === undefined ? this.arbitraryDecMapping() : mapping;
    return interestsArr.filter(function (interest) {
      return _mapping[interest.toLowerCase()] === undefined;
    }).join(':::');
  },

  //----------------------
  // In: decimal array
  // Out: [Keyword, Keyword, ....]
  // For now, I'll always pass arbitraryDecMapping as mapping
  // ---------------------
  decArrToInterests: function decArrToInterests(decArr, mapping) {
    var _mapping = mapping === undefined ? this.arbitraryDecMapping() : mapping;
    return Object.keys(_mapping).reduce(function (interests, interest) {
      var interestDecArr = _mapping[interest];
      if (interestDecArr.length == decArr.length) {
        var match = true;
        for (var i = 0; i < decArr.length; i++) {
          match = match && (decArr[i] == interestDecArr[i] || (decArr[i] & interestDecArr[i]) > 0);
        };
        if (match) {
          interests.push(interest);
        }
      }
      return interests;
    }, []);
  },

  capitalize: function capitalize(s) {
    return s[0].toUpperCase() + s.substr(1);
  },

  getSelectedInterests: function getSelectedInterests() {
    var that = this;
    return Object.keys(this.staticInterests).filter(function (interest) {
      return that.staticInterests[interest]['selected'];
    }).reduce(function (is, i) {
      is[i] = that.staticInterests[i];
      return is;
    }, {});
  },

  /* No longer used */
  blinkNodes: function blinkNodes() {
    console.log('blinkNodes!!!!!!');
    var that = this;
    var minVdnaWeight = (5 - this.privacySlider) * 2;
    var truncate = this.sorting === 2;
    var selectedInterests = this.getSelectedInterests();
    var selectedInterestKeys = Object.keys(selectedInterests);
    console.log(JSON.stringify(selectedInterestKeys));

    var shownIndex = 0;
    $("*[vdnaclass]").each(function (index, el) {
      var vdnaWeight = parseInt($(el).attr('vdnaweight'));
      var show = $(el).attr('vdnaclass').split(/,/).reduce(function (showOrHide, keyword) {
        return showOrHide || selectedInterestKeys.indexOf(keyword) > -1;
      }, false) && vdnaWeight >= minVdnaWeight && (!truncate || shownIndex < that.truncateLength);
      if (show) {
        $(el).show();
        shownIndex += 1;
      } else {
        if (that.power) {
          $(el).hide();
        } else {
          $(el).show();
          shownIndex += 1;
        }
      }
    });
  },

  /*
   addInterest: function(category, interest) {
     staticData[category][interest] = { category: category, source: 'vdna', clicks: 1, added: Date.now(), selected: true };
   },
   */

  addInterest: function addInterest(interest) {
    if (typeof this.staticInterests[interest] === 'object') {
      this.staticInterests[interest]['selected'] = true;
      this.gatherVdna();
      this.showVdnaDivs();
      return true;
    } else {
      return false;
    }
  },

  /*
   var addRelatedInterest = function(category, interest) {
     staticData[category][interest]['selected'] = true;
     React.render(<VdnaMenu />, document.getElementById('vdnamenu'));
   },
   */

  addRelatedInterest: function addRelatedInterest(interest) {
    this.staticInterests[interest]['selected'] = true;
    // this.blinkNodes();
    this.gatherVdna();
    this.showVdnaDivs();
    // React.render(<VdnaMenu />, document.getElementById('vdnamenu'));
  },

  /*
   unLikeAnInterest: function(category, interest) {
     staticData[category][interest]['selected'] = false;
     React.render(<VdnaMenu />, document.getElementById('vdnamenu'));
   },
   */

  unLikeAnInterest: function unLikeAnInterest(interest) {
    this.staticInterests[interest]['selected'] = false;
    // this.blinkNodes();
    this.gatherVdna();
    this.showVdnaDivs();
    // React.render(<VdnaMenu />, document.getElementById('vdnamenu'));
  },

  setPrivacySlider: function setPrivacySlider(val) {
    if (val !== this.privacySlider) {
      this.privacySlider = val;
      console.log('privacy slider set to: ' + val);
      // this.blinkNodes();
      this.gatherVdna();
      this.showVdnaDivs();
    }
  },

  mergeObjects: function mergeObjects(obj1, obj2) {
    Object.keys(obj2).forEach(function (key) {
      obj1[key] = obj2[key];
    });
    return obj1;
  },

  facebook: [{
    cnet: { source: 'facebook', clicks: 0, added: Date.now(), selected: true,
      related: 'technology,helth,science' },
    "jazz dock": { source: 'facebook', clicks: 0, added: Date.now(), selected: true,
      related: 'music,jazz,concerts' }
  }, {
    "new scientist": { source: 'facebook', clicks: 0, added: Date.now(), selected: true,
      related: 'science,literature' },
    "divadlo archa": { source: 'facebook', clicks: 0, added: Date.now(), selected: true,
      related: 'music,theater,concerts' }
  }, {
    hiking: { source: 'facebook', clicks: 0, added: Date.now(), selected: true,
      related: 'health,fitness' },
    recycling: { source: 'facebook', clicks: 0, added: Date.now(), selected: true,
      related: 'technology' }
  }],
  newLikes: {},
  totalFacebookSync: 0,

  pinterest: [{
    mammals: { source: 'pintrest', clicks: 0, added: Date.now(), selected: true,
      related: 'science' },
    spain: { source: 'pintrest', clicks: 0, added: Date.now(), selected: true,
      related: 'literature,film,music' }
  }, {
    prague: { source: 'pintrest', clicks: 0, added: Date.now(), selected: true,
      related: 'literature,film,music' },
    ferrets: { source: 'pintrest', clicks: 0, added: Date.now(), selected: true,
      related: 'humor,science' }
  }, {
    "avant garde": { source: 'pintrest', clicks: 0, added: Date.now(), selected: true,
      related: 'music,drama,theater,film' },
    synchronicities: { source: 'pintrest', clicks: 0, added: Date.now(), selected: true,
      related: 'spirituality,literature,film' }
  }],
  totalPinterestSync: 0,

  facebookImportReset: function facebookImportReset() {
    this.facebook = [];
    this.totalFacebookSync = 0;
  },

  importNewLike: function importNewLike(like) {
    this.newLikes[like.toLowerCase()] = { source: 'facebook', clicks: 0, added: Date.now(), selected: true, related: '' };
  },

  pushNewLikes: function pushNewLikes() {
    if (Object.keys(this.newLikes).length > 0) {
      this.facebook.unshift(this.newLikes);
      this.newLikes = {};
    }
  },

  /* -------------------------------------------------
   find all divs marked with the attribute vdnaroot.
   create an array with all children marked with the
   attribute vdnaclass.
   that's the first step, anyway.
   vdnaDivs: { divName: { 0: [ vdna off (all divs) ], 1: [ sorted vdnaclass divs ],
                          2: [ unsorted vdnaclass divs ], 3: [ sorted and truncated vdnaclass divs],
                          4: [ unsorted but truncated vdnaclass divs ] }, divName: { ... } }
     ------------------------------------------------- */

  originalVdnaDivs: {},
  vdnaDivs: {},

  _appendDivs: function _appendDivs(vdnaRootName, numero) {
    this.vdnaDivs[vdnaRootName][numero].forEach(function (div) {
      $("div[vdnaroot='" + vdnaRootName + "']").append(div);
    });
  },

  showVdnaDivs: function showVdnaDivs() {
    var that = this;
    $("*[vdnaroot]").each(function (index, vdnaRootEl) {
      $(vdnaRootEl).html('');
      var vdnaRootName = $(vdnaRootEl).attr("vdnaroot");
      console.log('Sorting: ' + that.sorting);
      console.log('About to append ' + that.vdnaDivs[vdnaRootName][that.sorting].length + ' divs.');
      console.log("vdnaDivs (weights): " + JSON.stringify(that.vdnaDivs[vdnaRootName][that.sorting].map(function (div) {
        return parseInt(div.substr(div.indexOf('vdnaweight') + 12, 2));
      })));
      that._appendDivs(vdnaRootName, that.sorting);
    });
  },

  _weightSort: function _weightSort(a, b) {
    var vdnaWeightA = parseInt(a.substr(a.indexOf('vdnaweight') + 12, 2));
    var vdnaWeightB = parseInt(b.substr(b.indexOf('vdnaweight') + 12, 2));
    // console.log('vdnaWeightA : ' + vdnaWeightA + '    vdnaWeightB: ' + vdnaWeightB);
    return vdnaWeightB - vdnaWeightA;
  },

  gatherOriginalVdna: function gatherOriginalVdna() {
    var that = this;
    $("*[vdnaroot]").each(function (index, vdnaRootEl) {
      var vdnaRootName = $(vdnaRootEl).attr("vdnaroot");
      that.originalVdnaDivs[vdnaRootName] = [];
      $(vdnaRootEl).find("*[vdnaclass]").each(function (index, vdnaClassEl) {
        that.originalVdnaDivs[vdnaRootName].push(vdnaClassEl.outerHTML);
      });
    });
  },

  gatherVdna: function gatherVdna() {
    'use strict';

    var _this = this;

    if (Object.keys(this.originalVdnaDivs) === 0) {
      this.gatherOriginalVdna();
    }

    var minVdnaWeight = (5 - this.privacySlider) * 2;
    var selectedInterests = this.getSelectedInterests();
    var selectedInterestKeys = Object.keys(selectedInterests);
    $("*[vdnaroot]").each(function (index, vdnaRootEl) {
      var vdnaRootName = $(vdnaRootEl).attr("vdnaroot");
      console.log("VdnaRoot: " + vdnaRootName);
      _this.vdnaDivs[vdnaRootName] = [];
      _this.vdnaDivs[vdnaRootName][0] = [];
      _this.vdnaDivs[vdnaRootName][2] = [];
      _this.vdnaDivs[vdnaRootName][4] = [];
      console.log('originalVdna Count: (' + vdnaRootName + '): ' + _this.originalVdnaDivs[vdnaRootName].length);
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = _this.originalVdnaDivs[vdnaRootName][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var vdnaClassElStr = _step.value;

          _this.vdnaDivs[vdnaRootName][0].push(vdnaClassElStr);
          var vdnaClassEl = $.parseHTML(vdnaClassElStr);
          var vdnaWeight = parseInt($(vdnaClassEl).attr('vdnaweight'));
          var show = $(vdnaClassEl).attr('vdnaclass').split(/,/).reduce(function (showOrHide, interest) {
            return showOrHide || selectedInterestKeys.indexOf(interest.trim().toLowerCase()) > -1;
          }, false) && vdnaWeight >= minVdnaWeight;
          if (show) {
            _this.vdnaDivs[vdnaRootName][2].push(vdnaClassElStr);
            if (_this.vdnaDivs[vdnaRootName][4].length < _this.truncateLength) {
              _this.vdnaDivs[vdnaRootName][4].push(vdnaClassElStr);
            }
          }
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator['return']) {
            _iterator['return']();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      ;
      // because Array.prototype.sort is DESTRUCTIVE!
      _this.vdnaDivs[vdnaRootName][1] = _this.vdnaDivs[vdnaRootName][2].reduce(function (memo, el) {
        memo.push(el);
        return memo;
      }, []).sort(_this._weightSort);
      _this.vdnaDivs[vdnaRootName][3] = _this.vdnaDivs[vdnaRootName][4].reduce(function (memo, el) {
        memo.push(el);
        return memo;
      }, []).sort(_this._weightSort);
    });
    console.log("vdnaDivs STATISTICS: \n");
    for (var i = 0; i < 5; i++) {
      console.log(i + ": " + this.vdnaDivs["events"][i].length);
    }
  }
};

//# sourceMappingURL=data:application/json;base64,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YXRhLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHsgY2F0ZWdvcnlOYW1lOlxuLy8gICB7IGludGVyZXN0TmFtZTpcbi8vICAgICB7IHNvdXJjZTogJ2ZhY2Vib29rJyxcbi8vICAgICAgIGNsaWNrczogNSxcbi8vICAgICAgIGFkZGVkOiBEYXRlLm5vdygpIH0sXG4vLyAgICAgLi4uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5BcnJheS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oYXJyKSB7XG4gIHZhciByZXMgPSBbXTtcbiAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoIHx8IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBpZih0aGlzW2ldID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJlcy5wdXNoKGFycltpXSk7XG4gICAgfSBlbHNlIGlmKGFycltpXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXMucHVzaCh0aGlzW2ldKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnB1c2godGhpc1tpXSArIGFycltpXSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gcmVzO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHN0YXRpY0ludGVyZXN0czoge1xuICAgIG11c2ljOiAgICAgICAgICAgICAgeyBzb3VyY2U6ICd0aWNrZXRwcm8nLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZDogJ3JvY2sgbXVzaWMsamF6eixjb25jZXJ0cyxvcGVyYScgfSxcbiAgICBcImZyZW5jaCBhY3RvcnNcIjogICAgeyBzb3VyY2U6ICd0aWNrZXRwcm8nLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdkcmFtYSxmaWxtJyB9LFxuICAgIGFjdG9yczogICAgICAgICAgICAgeyBzb3VyY2U6ICd0aWNrZXRwcm8nLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdjemVjaCBmaWxtLCBmaWxtJyB9LFxuICAgIHNwaXJpdHVhbGl0eTogICAgICAgeyBzb3VyY2U6ICd0aWNrZXRwcm8nLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdsaXRlcmF0dXJlLG11c2ljJyB9LFxuICAgIFwiY3plY2ggZmlsbVwiOiAgICAgICB7IHNvdXJjZTogJ3RpY2tldHBybycsIGNsaWNrczogMCwgYWRkZWQ6IERhdGUubm93KCksIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZDogJ2ZpbG0sYWN0b3JzJyB9LFxuICAgIFwicm9jayBtdXNpY1wiOiAgICAgICB7IHNvdXJjZTogJ3RpY2tldHBybycsIGNsaWNrczogMCwgYWRkZWQ6IERhdGUubm93KCksIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZDogJ211c2ljJyB9LFxuICAgIFwid29ybGQgbXVzaWNcIjogICAgICB7IHNvdXJjZTogJ3RpY2tldHBybycsIGNsaWNrczogMCwgYWRkZWQ6IERhdGUubm93KCksIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZDogJ211c2ljJyB9LFxuICAgIGpheno6ICAgICAgICAgICAgICAgeyBzb3VyY2U6ICd0aWNrZXRwcm8nLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZDogJ211c2ljJyB9LFxuICAgIHRlY2hub2xvZ3k6ICAgICAgICAgeyBzb3VyY2U6ICd0aWNrZXRwcm8nLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdoZWFsdGgsc2NpZW5jZScgfSxcbiAgICBoZWFsdGg6ICAgICAgICAgICAgIHsgc291cmNlOiAndGlja2V0cHJvJywgY2xpY2tzOiAwLCBhZGRlZDogRGF0ZS5ub3coKSwgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdzY2llbmNlLGRlbnRhbCcgfSxcbiAgICBkZW50YWw6ICAgICAgICAgICAgIHsgc291cmNlOiAndGlja2V0cHJvJywgY2xpY2tzOiAwLCBhZGRlZDogRGF0ZS5ub3coKSwgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkOiAnaGVhbHRoJyB9LFxuICAgIGNvbWljczogICAgICAgICAgICAgeyBzb3VyY2U6ICd0aWNrZXRwcm8nLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdodW1vcixsaXRlcmF0dXJlJyB9LFxuICAgIGh1bW9yOiAgICAgICAgICAgICAgeyBzb3VyY2U6ICd0aWNrZXRwcm8nLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdhY3RvcnMsbGl0ZXJhdHVyZScgfSxcbiAgICBsaXRlcmF0dXJlOiAgICAgICAgIHsgc291cmNlOiAndGlja2V0cHJvJywgY2xpY2tzOiAwLCBhZGRlZDogRGF0ZS5ub3coKSwgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkOiAndGhlYXRlcixjb21pY3MnIH0sXG4gICAgc2NpZW5jZTogICAgICAgICAgICB7IHNvdXJjZTogJ3RpY2tldHBybycsIGNsaWNrczogMCwgYWRkZWQ6IERhdGUubm93KCksIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZDogJ3RlY2hub2xvZ3ksaGVhbHRoJyB9LFxuICAgIGRyYW1hOiAgICAgICAgICAgICAgeyBzb3VyY2U6ICd0aWNrZXRwcm8nLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICd0aGVhdGVyLGZpbG0sbGl0ZXJhdHVyZScgfSxcbiAgICB0aGVhdGVyOiAgICAgICAgICAgIHsgc291cmNlOiAndGlja2V0cHJvJywgY2xpY2tzOiAwLCBhZGRlZDogRGF0ZS5ub3coKSwgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkOiAnZHJhbWEsbGl0ZXJhdHVyZSxvcGVyYScgfSxcbiAgICBmaWxtOiAgICAgICAgICAgICAgIHsgc291cmNlOiAndGlja2V0cHJvJywgY2xpY2tzOiAwLCBhZGRlZDogRGF0ZS5ub3coKSwgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkOiAnZHJhbWEsbGl0ZXJhdHVyZSxjb21pY3MnIH0sXG4gICAgY29uY2VydHM6ICAgICAgICAgICB7IHNvdXJjZTogJ3RpY2tldHBybycsIGNsaWNrczogMCwgYWRkZWQ6IERhdGUubm93KCksIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZDogJ211c2ljLHRoZWF0ZXInIH0sXG4gICAgXCJjb250ZW1wb3JhcnkgYXJ0XCI6IHsgc291cmNlOiAndGlja2V0cHJvJywgY2xpY2tzOiAwLCBhZGRlZDogRGF0ZS5ub3coKSwgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdsaXRlcmF0dXJlLGZpbG0sdGhlYXRlcicgfSxcbiAgICBvcGVyYTogICAgICAgICAgICAgIHsgc291cmNlOiAndGlja2V0cHJvJywgY2xpY2tzOiAwLCBhZGRlZDogRGF0ZS5ub3coKSwgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkOiAnbXVzaWMsdGhlYXRlcicgfSxcbiAgICBmaXRuZXNzOiAgICAgICAgICAgIHsgc291cmNlOiAndGlja2V0cHJvJywgY2xpY2tzOiAwLCBhZGRlZDogRGF0ZS5ub3coKSwgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkOiAnaGVhbHRoLHNjaWVuY2UnIH1cbiAgfSxcblxuICBhcmJpdHJhcnlCaW5NYXBwaW5nOiB7XG4gICAgXCJtdXNpY1wiOiBcIjEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIixcbiAgICBcImZyZW5jaCBhY3RvcnNcIjogXCIxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiLFxuICAgIFwiYWN0b3JzXCI6IFwiMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIsXG4gICAgXCJsYSByaW9qYVwiOiBcIjEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIixcbiAgICBcImNhc3RpbGxlIHkgbGXDs25cIjogXCIxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiLFxuICAgIFwic3BhaW5cIjogXCIxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIixcbiAgICBcInNwaXJpdHVhbGl0eVwiOiBcIjEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIixcbiAgICBcInJpb1wiOiBcIjEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIsXG4gICAgXCJjemVjaCBmaWxtXCI6IFwiMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIsXG4gICAgXCJyb2NrIG11c2ljXCI6IFwiMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiLFxuICAgIFwiamF6elwiOiBcIjEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIsXG4gICAgXCJ0ZWNobm9sb2d5XCI6IFwiMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIsXG4gICAgXCJoZWFsdGhcIjogXCIxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIsXG4gICAgXCJkZW50YWxcIjogXCIxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiLFxuICAgIFwiY29taWNzXCI6IFwiMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIsXG4gICAgXCJodW1vclwiOiBcIjEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIixcbiAgICBcImxpdGVyYXR1cmVcIjogXCIxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiLFxuICAgIFwic2NpZW5jZVwiOiBcIjEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiLFxuICAgIFwiZHJhbWFcIjogXCIxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIsXG4gICAgXCJ0aGVhdGVyXCI6IFwiMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIixcbiAgICBcImZpbG1cIjogXCIxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIixcbiAgICBcImNvbmNlcnRzXCI6IFwiMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiLFxuICAgIFwiY29udGVtcG9yYXJ5IGFydFwiOiBcIjEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIsXG4gICAgXCJvcGVyYVwiOiBcIjEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiLFxuICAgIFwiZml0bmVzc1wiOiBcIjEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIlxuICB9LFxuXG4gIHByaXZhY3lTbGlkZXI6IDMsXG4gIHBvd2VyOiB0cnVlLFxuICBpbmZvX2JhbGxvb246IGZhbHNlLFxuICBmYWNlYm9va0Nvbm5lY3Q6IGZhbHNlLFxuICBwaW50ZXJlc3RDb25uZWN0OiBmYWxzZSxcblxuICAvLyAtLS0tIHNldHRpbmdzXG4gIC8vIGZvciBzb3J0aW5nOiAwOiB2ZG5hIG9mZlxuICAvLyAgICAgICAgICAgICAgMTogc29ydGVkIHZkbmFjbGFzcyBkaXZzXG4gIC8vICAgICAgICAgICAgICAyOiB1bnNvcnRlZCB2ZG5hY2xhc3MgZGl2c1xuICAvLyAgICAgICAgICAgICAgMzogc29ydGVkIGFuZCB0cnVuY2F0ZWQgdmRuYWNsYXNzIGRpdnNcbiAgLy8gICAgICAgICAgICAgIDQ6IHVuc29ydGVkIGJ1dCB0cnVuY2F0ZWQgdmRuYWNsYXNzIGRpdnNcbiAgYXV0b3NhdmU6IHRydWUsXG4gIHNvcnRpbmc6IDEsXG4gIHRydW5jYXRlTGVuZ3RoOiAxMCwgLy8gU3RhdGljIGZvciBub3cuXG5cbiAgcmV2ZXJzZUJpbk1hcHBpbmcoKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmFyYml0cmFyeUJpbk1hcHBpbmcpLnJlZHVjZShmdW5jdGlvbihyTWFwLCBrZXkpIHtcbiAgICAgIHJNYXBbdGhhdC5hcmJpdHJhcnlCaW5NYXBwaW5nW2tleV1dID0ga2V5O1xuICAgICAgcmV0dXJuIHJNYXA7XG4gICAgfSwge30pO1xuICB9LFxuXG4gIC8vIC0tLSBldmVyeXRoaW5nIG11c3QgYmUgc3BsaXQgaW50byB0d28gMzIgYml0IHRodXJrcy5cbiAgYXJiaXRyYXJ5RGVjTWFwcGluZygpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuYXJiaXRyYXJ5QmluTWFwcGluZykucmVkdWNlKGZ1bmN0aW9uKGRNYXAsIGtleSkge1xuICAgICAgZE1hcFtrZXldID0gdGhhdC5iaW5TdHJpbmdBcnJUb0RlY0Fycih0aGF0LmJpblN0cmluZ1NwbGl0KDMyLCB0aGF0LmFyYml0cmFyeUJpbk1hcHBpbmdba2V5XSkpO1xuICAgICAgcmV0dXJuIGRNYXA7XG4gICAgfSwge30pO1xuICB9LFxuXG4gIC8vIC0tLSBoZWxwZXIgbW9ua2V5cyAoY29va2llcylcblxuICBwb3dPZjJBcnIoaSkge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgaTsgaisrKSB7XG4gICAgICBhcnIucHVzaChNYXRoLnBvdygyLCBqKSk7XG4gICAgfTtcbiAgICByZXR1cm4gYXJyO1xuICB9LFxuXG4gIC8vIC0tLSBzcGxpdCBpbnRvIG4gKDMyIGZvciBub3cpIGJpdCB0cm96b3MuXG4gIGJpblN0cmluZ1NwbGl0KG4sIGJpblN0cmluZykge1xuICAgIHZhciByZW1TdHJpbmcgPSBiaW5TdHJpbmc7XG4gICAgdmFyIHRyb3pvcyA9IFtdO1xuICAgIHdoaWxlKHJlbVN0cmluZy5sZW5ndGggPiBuKSB7XG4gICAgICB0cm96b3MudW5zaGlmdChyZW1TdHJpbmcuc3Vic3RyKHJlbVN0cmluZy5sZW5ndGggLSBuKSk7XG4gICAgICByZW1TdHJpbmcgPSByZW1TdHJpbmcuc3Vic3RyKDAsIHJlbVN0cmluZy5sZW5ndGggLSBuKTtcbiAgICB9O1xuICAgIHRyb3pvcy51bnNoaWZ0KHJlbVN0cmluZyk7XG4gICAgcmV0dXJuIHRyb3pvcztcbiAgfSxcblxuICBiaW5TdHJpbmdUb0RlYyhiaW5TdHJpbmcpIHtcbiAgICB2YXIgcG93QXJyID0gdGhpcy5wb3dPZjJBcnIoYmluU3RyaW5nLmxlbmd0aCkucmV2ZXJzZSgpO1xuICAgIHZhciBhY2MgPSAwO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBiaW5TdHJpbmcubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFjYyArPSBwb3dBcnJbaV0gKiBwYXJzZUludChiaW5TdHJpbmcuY2hhckF0KGkpKTtcbiAgICB9O1xuICAgIHJldHVybiBhY2M7XG4gIH0sXG5cbiAgYmluU3RyaW5nQXJyVG9EZWNBcnIoYmluU3RyaW5nQXJyKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHJldHVybiBiaW5TdHJpbmdBcnIubWFwKGZ1bmN0aW9uKGJpblN0cmluZykge1xuICAgICAgcmV0dXJuIHRoYXQuYmluU3RyaW5nVG9EZWMoYmluU3RyaW5nKTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyBFc3RvIHNvbG8gZnVuY2lvbmEgY29uIGludGVncmFsZXMgcG9zaXRpdm9zLlxuICBkZWNUb0JpblN0cmluZyhkZWMpIHtcbiAgICBpZihkZWMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIFwiMFwiO1xuICAgIH1cbiAgICB2YXIgYmluU3RyaW5nID0gXCJcIjtcbiAgICB3aGlsZShkZWMgPj0gMSkge1xuICAgICAgYmluU3RyaW5nID0gKGRlYyAlIDIpLnRvU3RyaW5nKCkgKyBiaW5TdHJpbmc7XG4gICAgICBkZWMgPSBNYXRoLmZsb29yKGRlYyAvIDIpO1xuICAgIH07XG4gICAgcmV0dXJuIGJpblN0cmluZztcbiAgfSxcblxuICAvLyAtLS0gZW5kIGhlbHBlciBtb25rZXlzXG5cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEluOiBbS2V5d29yZCwgLi4uLl0sIG1hcHBpbmdcbiAgLy8gT3V0OiB7YmluU3RyaW5nOiBcIjEwMDAwMDAuLi4uLlwiLCBkZWM6IDc4MjEwLi4ufVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgaW50ZXJlc3RzVG9CaW5TdHJpbmdBbmREZWMoa2V5d29yZEFyciwgbWFwcGluZykge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICByZXR1cm4ga2V5d29yZEFyci5tYXAoZnVuY3Rpb24oa2V5d29yZCkge1xuICAgICAgcmV0dXJuIG1hcHBpbmdba2V5d29yZF07XG4gICAgfSkucmVkdWNlKGZ1bmN0aW9uKGN1bG1pbmF0aW9uLCBiaW5TdHJpbmcpIHtcbiAgICAgIHZhciBkZWM7XG4gICAgICBpZihiaW5TdHJpbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZWMgPSBkZWM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWMgPSBjdWxtaW5hdGlvblsnZGVjJ10gKyB0aGF0LmJpblN0cmluZ1RvRGVjKGJpblN0cmluZyk7XG4gICAgICB9XG4gICAgICBjdWxtaW5hdGlvblsnYmluU3RyaW5nJ10gPSB0aGF0LmRlY1RvQmluU3RyaW5nKGRlYyk7XG4gICAgICBjdWxtaW5hdGlvblsnZGVjJ10gPSBkZWM7XG4gICAgICByZXR1cm4gY3VsbWluYXRpb247XG4gICAgfSwge2JpblN0cmluZzogXCJcIiwgZGVjOiAwfSk7XG4gIH0sXG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gSW4gW0tleXdvcmQsIC4uLi5dICh0byBEZWNBcnIpIG1hcHBpbmcuXG4gIC8vIE91dDoge2JpblN0cmluZzogXCIxMDAwMC4uLlwiLCBkZWNBcnI6IFsgNDE5NDMwNCwgMCBdIChleGFtcGxlKX1cbiAgaW50ZXJlc3RzVG9EZWNBcnIoaW50ZXJlc3RzQXJyLCBtYXBwaW5nKSB7XG4gICAgdmFyIF9tYXBwaW5nID0gbWFwcGluZyA9PT0gdW5kZWZpbmVkID8gdGhpcy5hcmJpdHJhcnlEZWNNYXBwaW5nKCkgOiBtYXBwaW5nO1xuICAgIHJldHVybiBpbnRlcmVzdHNBcnIubWFwKGZ1bmN0aW9uKGludGVyZXN0KSB7XG4gICAgICByZXR1cm4gX21hcHBpbmdbaW50ZXJlc3QudG9Mb3dlckNhc2UoKV07XG4gICAgfSkucmVkdWNlKGZ1bmN0aW9uKGN1bG1pbmF0aW9uLCBkZWNBcnIpIHtcbiAgICAgIGlmKGRlY0FyciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGN1bG1pbmF0aW9uID0gY3VsbWluYXRpb24uYWRkKGRlY0Fycik7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VsbWluYXRpb247XG4gICAgfSwgWzBdKTtcbiAgfSxcblxuICB0YWxseUV4dHJhSW50ZXJlc3RzKGludGVyZXN0c0FyciwgbWFwcGluZykge1xuICAgIHZhciBfbWFwcGluZyA9IG1hcHBpbmcgPT09IHVuZGVmaW5lZCA/IHRoaXMuYXJiaXRyYXJ5RGVjTWFwcGluZygpIDogbWFwcGluZztcbiAgICByZXR1cm4gaW50ZXJlc3RzQXJyLmZpbHRlcihmdW5jdGlvbihpbnRlcmVzdCkge1xuICAgICAgcmV0dXJuIF9tYXBwaW5nW2ludGVyZXN0LnRvTG93ZXJDYXNlKCldID09PSB1bmRlZmluZWQ7XG4gICAgfSkuam9pbignOjo6Jyk7XG4gIH0sXG5cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEluOiBkZWNpbWFsIGFycmF5XG4gIC8vIE91dDogW0tleXdvcmQsIEtleXdvcmQsIC4uLi5dXG4gIC8vIEZvciBub3csIEknbGwgYWx3YXlzIHBhc3MgYXJiaXRyYXJ5RGVjTWFwcGluZyBhcyBtYXBwaW5nXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBkZWNBcnJUb0ludGVyZXN0cyhkZWNBcnIsIG1hcHBpbmcpIHtcbiAgICB2YXIgX21hcHBpbmcgPSBtYXBwaW5nID09PSB1bmRlZmluZWQgPyB0aGlzLmFyYml0cmFyeURlY01hcHBpbmcoKSA6IG1hcHBpbmc7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKF9tYXBwaW5nKS5yZWR1Y2UoZnVuY3Rpb24oaW50ZXJlc3RzLCBpbnRlcmVzdCkge1xuICAgICAgdmFyIGludGVyZXN0RGVjQXJyID0gX21hcHBpbmdbaW50ZXJlc3RdO1xuICAgICAgaWYoaW50ZXJlc3REZWNBcnIubGVuZ3RoID09IGRlY0Fyci5sZW5ndGgpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gdHJ1ZTtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGRlY0Fyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIG1hdGNoID0gbWF0Y2ggJiYgKGRlY0FycltpXSA9PSBpbnRlcmVzdERlY0FycltpXSB8fCAoZGVjQXJyW2ldICYgaW50ZXJlc3REZWNBcnJbaV0pID4gMCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmKG1hdGNoKSB7XG4gICAgICAgICAgaW50ZXJlc3RzLnB1c2goaW50ZXJlc3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaW50ZXJlc3RzO1xuICAgIH0sIFtdKTtcbiAgfSxcblxuICBjYXBpdGFsaXplKHMpIHtcbiAgICByZXR1cm4oc1swXS50b1VwcGVyQ2FzZSgpICsgcy5zdWJzdHIoMSkpO1xuICB9LFxuXG4gIGdldFNlbGVjdGVkSW50ZXJlc3RzKCkge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5zdGF0aWNJbnRlcmVzdHMpLmZpbHRlcihmdW5jdGlvbihpbnRlcmVzdCkge1xuICAgICAgcmV0dXJuIHRoYXQuc3RhdGljSW50ZXJlc3RzW2ludGVyZXN0XVsnc2VsZWN0ZWQnXTtcbiAgICB9KS5yZWR1Y2UoZnVuY3Rpb24oaXMsIGkpIHtcbiAgICAgIGlzW2ldID0gdGhhdC5zdGF0aWNJbnRlcmVzdHNbaV07XG4gICAgICByZXR1cm4gaXM7XG4gICAgfSwge30pO1xuICB9LFxuXG4gIC8qIE5vIGxvbmdlciB1c2VkICovXG4gIGJsaW5rTm9kZXMoKSB7XG4gICAgY29uc29sZS5sb2coJ2JsaW5rTm9kZXMhISEhISEnKTtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdmFyIG1pblZkbmFXZWlnaHQgPSAoNSAtIHRoaXMucHJpdmFjeVNsaWRlcikgKiAyO1xuICAgIHZhciB0cnVuY2F0ZSA9IHRoaXMuc29ydGluZyA9PT0gMjtcbiAgICB2YXIgc2VsZWN0ZWRJbnRlcmVzdHMgPSB0aGlzLmdldFNlbGVjdGVkSW50ZXJlc3RzKCk7XG4gICAgdmFyIHNlbGVjdGVkSW50ZXJlc3RLZXlzID0gT2JqZWN0LmtleXMoc2VsZWN0ZWRJbnRlcmVzdHMpO1xuICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHNlbGVjdGVkSW50ZXJlc3RLZXlzKSk7XG5cbiAgICB2YXIgc2hvd25JbmRleCA9IDA7XG4gICAgJChcIipbdmRuYWNsYXNzXVwiKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbCkge1xuICAgICAgdmFyIHZkbmFXZWlnaHQgPSBwYXJzZUludCgkKGVsKS5hdHRyKCd2ZG5hd2VpZ2h0JykpO1xuICAgICAgdmFyIHNob3cgPSAkKGVsKS5hdHRyKCd2ZG5hY2xhc3MnKS5zcGxpdCgvLC8pLnJlZHVjZShmdW5jdGlvbihzaG93T3JIaWRlLCBrZXl3b3JkKSB7XG4gICAgICAgIHJldHVybiBzaG93T3JIaWRlIHx8IChzZWxlY3RlZEludGVyZXN0S2V5cy5pbmRleE9mKGtleXdvcmQpID4gLTEpO1xuICAgICAgfSwgZmFsc2UpICYmICh2ZG5hV2VpZ2h0ID49IG1pblZkbmFXZWlnaHQpICYmICghdHJ1bmNhdGUgfHwgc2hvd25JbmRleCA8IHRoYXQudHJ1bmNhdGVMZW5ndGgpO1xuICAgICAgaWYoc2hvdykge1xuICAgICAgICAkKGVsKS5zaG93KCk7XG4gICAgICAgIHNob3duSW5kZXggKz0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKHRoYXQucG93ZXIpIHtcbiAgICAgICAgICAkKGVsKS5oaWRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJChlbCkuc2hvdygpO1xuICAgICAgICAgIHNob3duSW5kZXggKz0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIC8qXG4gICBhZGRJbnRlcmVzdDogZnVuY3Rpb24oY2F0ZWdvcnksIGludGVyZXN0KSB7XG4gICAgIHN0YXRpY0RhdGFbY2F0ZWdvcnldW2ludGVyZXN0XSA9IHsgY2F0ZWdvcnk6IGNhdGVnb3J5LCBzb3VyY2U6ICd2ZG5hJywgY2xpY2tzOiAxLCBhZGRlZDogRGF0ZS5ub3coKSwgc2VsZWN0ZWQ6IHRydWUgfTtcbiAgIH0sXG4gICAqL1xuXG4gIGFkZEludGVyZXN0KGludGVyZXN0KSB7XG4gICAgaWYodHlwZW9mIHRoaXMuc3RhdGljSW50ZXJlc3RzW2ludGVyZXN0XSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHRoaXMuc3RhdGljSW50ZXJlc3RzW2ludGVyZXN0XVsnc2VsZWN0ZWQnXSA9IHRydWU7XG4gICAgICB0aGlzLmdhdGhlclZkbmEoKTtcbiAgICAgIHRoaXMuc2hvd1ZkbmFEaXZzKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcblxuICAvKlxuICAgdmFyIGFkZFJlbGF0ZWRJbnRlcmVzdCA9IGZ1bmN0aW9uKGNhdGVnb3J5LCBpbnRlcmVzdCkge1xuICAgICBzdGF0aWNEYXRhW2NhdGVnb3J5XVtpbnRlcmVzdF1bJ3NlbGVjdGVkJ10gPSB0cnVlO1xuICAgICBSZWFjdC5yZW5kZXIoPFZkbmFNZW51IC8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmRuYW1lbnUnKSk7XG4gICB9LFxuICAgKi9cblxuICBhZGRSZWxhdGVkSW50ZXJlc3QoaW50ZXJlc3QpIHtcbiAgICB0aGlzLnN0YXRpY0ludGVyZXN0c1tpbnRlcmVzdF1bJ3NlbGVjdGVkJ10gPSB0cnVlO1xuICAgIC8vIHRoaXMuYmxpbmtOb2RlcygpO1xuICAgIHRoaXMuZ2F0aGVyVmRuYSgpO1xuICAgIHRoaXMuc2hvd1ZkbmFEaXZzKCk7XG4gICAgLy8gUmVhY3QucmVuZGVyKDxWZG5hTWVudSAvPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZkbmFtZW51JykpO1xuICB9LFxuXG4gIC8qXG4gICB1bkxpa2VBbkludGVyZXN0OiBmdW5jdGlvbihjYXRlZ29yeSwgaW50ZXJlc3QpIHtcbiAgICAgc3RhdGljRGF0YVtjYXRlZ29yeV1baW50ZXJlc3RdWydzZWxlY3RlZCddID0gZmFsc2U7XG4gICAgIFJlYWN0LnJlbmRlcig8VmRuYU1lbnUgLz4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2ZG5hbWVudScpKTtcbiAgIH0sXG4gICAqL1xuXG4gIHVuTGlrZUFuSW50ZXJlc3QoaW50ZXJlc3QpIHtcbiAgICB0aGlzLnN0YXRpY0ludGVyZXN0c1tpbnRlcmVzdF1bJ3NlbGVjdGVkJ10gPSBmYWxzZTtcbiAgICAvLyB0aGlzLmJsaW5rTm9kZXMoKTtcbiAgICB0aGlzLmdhdGhlclZkbmEoKTtcbiAgICB0aGlzLnNob3dWZG5hRGl2cygpO1xuICAgIC8vIFJlYWN0LnJlbmRlcig8VmRuYU1lbnUgLz4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2ZG5hbWVudScpKTtcbiAgfSxcblxuICBzZXRQcml2YWN5U2xpZGVyKHZhbCkge1xuICAgIGlmKHZhbCAhPT0gdGhpcy5wcml2YWN5U2xpZGVyKSB7XG4gICAgICB0aGlzLnByaXZhY3lTbGlkZXIgPSB2YWw7XG4gICAgICBjb25zb2xlLmxvZygncHJpdmFjeSBzbGlkZXIgc2V0IHRvOiAnICsgdmFsKTtcbiAgICAgIC8vIHRoaXMuYmxpbmtOb2RlcygpO1xuICAgICAgdGhpcy5nYXRoZXJWZG5hKCk7XG4gICAgICB0aGlzLnNob3dWZG5hRGl2cygpO1xuICAgIH1cbiAgfSxcblxuICBtZXJnZU9iamVjdHMob2JqMSwgb2JqMikge1xuICAgIE9iamVjdC5rZXlzKG9iajIpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICBvYmoxW2tleV0gPSBvYmoyW2tleV07XG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajE7XG4gIH0sXG5cbiAgZmFjZWJvb2s6IFtcbiAgICB7XG4gICAgICBjbmV0OiAgICAgICAgeyBzb3VyY2U6ICdmYWNlYm9vaycsIGNsaWNrczogMCwgYWRkZWQ6IERhdGUubm93KCksIHNlbGVjdGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZDogJ3RlY2hub2xvZ3ksaGVsdGgsc2NpZW5jZScgfSxcbiAgICAgIFwiamF6eiBkb2NrXCI6IHsgc291cmNlOiAnZmFjZWJvb2snLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdtdXNpYyxqYXp6LGNvbmNlcnRzJyB9XG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5ldyBzY2llbnRpc3RcIjogeyBzb3VyY2U6ICdmYWNlYm9vaycsIGNsaWNrczogMCwgYWRkZWQ6IERhdGUubm93KCksIHNlbGVjdGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdzY2llbmNlLGxpdGVyYXR1cmUnIH0sXG4gICAgICBcImRpdmFkbG8gYXJjaGFcIjogeyBzb3VyY2U6ICdmYWNlYm9vaycsIGNsaWNrczogMCwgYWRkZWQ6IERhdGUubm93KCksIHNlbGVjdGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdtdXNpYyx0aGVhdGVyLGNvbmNlcnRzJyB9XG4gICAgfSxcbiAgICB7XG4gICAgICBoaWtpbmc6ICAgIHsgc291cmNlOiAnZmFjZWJvb2snLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICByZWxhdGVkOiAnaGVhbHRoLGZpdG5lc3MnIH0sXG4gICAgICByZWN5Y2xpbmc6IHsgc291cmNlOiAnZmFjZWJvb2snLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICByZWxhdGVkOiAndGVjaG5vbG9neScgfVxuICAgIH1cbiAgXSxcbiAgbmV3TGlrZXM6IHt9LFxuICB0b3RhbEZhY2Vib29rU3luYzogMCxcblxuICBwaW50ZXJlc3Q6IFtcbiAgICB7XG4gICAgICBtYW1tYWxzOiB7IHNvdXJjZTogJ3BpbnRyZXN0JywgY2xpY2tzOiAwLCBhZGRlZDogRGF0ZS5ub3coKSwgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdzY2llbmNlJyB9LFxuICAgICAgc3BhaW46ICAgeyBzb3VyY2U6ICdwaW50cmVzdCcsIGNsaWNrczogMCwgYWRkZWQ6IERhdGUubm93KCksIHNlbGVjdGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICByZWxhdGVkOiAnbGl0ZXJhdHVyZSxmaWxtLG11c2ljJyB9XG4gICAgfSxcbiAgICB7XG4gICAgICBwcmFndWU6ICB7IHNvdXJjZTogJ3BpbnRyZXN0JywgY2xpY2tzOiAwLCBhZGRlZDogRGF0ZS5ub3coKSwgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdsaXRlcmF0dXJlLGZpbG0sbXVzaWMnIH0sXG4gICAgICBmZXJyZXRzOiB7IHNvdXJjZTogJ3BpbnRyZXN0JywgY2xpY2tzOiAwLCBhZGRlZDogRGF0ZS5ub3coKSwgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdodW1vcixzY2llbmNlJyB9XG4gICAgfSxcbiAgICB7XG4gICAgICBcImF2YW50IGdhcmRlXCI6ICAgeyBzb3VyY2U6ICdwaW50cmVzdCcsIGNsaWNrczogMCwgYWRkZWQ6IERhdGUubm93KCksIHNlbGVjdGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQ6ICdtdXNpYyxkcmFtYSx0aGVhdGVyLGZpbG0nIH0sXG4gICAgICBzeW5jaHJvbmljaXRpZXM6IHsgc291cmNlOiAncGludHJlc3QnLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkOiAnc3Bpcml0dWFsaXR5LGxpdGVyYXR1cmUsZmlsbScgfVxuICAgIH1cbiAgXSxcbiAgdG90YWxQaW50ZXJlc3RTeW5jOiAwLFxuXG4gIGZhY2Vib29rSW1wb3J0UmVzZXQoKSB7XG4gICAgdGhpcy5mYWNlYm9vayA9IFtdO1xuICAgIHRoaXMudG90YWxGYWNlYm9va1N5bmMgPSAwO1xuICB9LFxuXG4gIGltcG9ydE5ld0xpa2UobGlrZSkge1xuICAgIHRoaXMubmV3TGlrZXNbbGlrZS50b0xvd2VyQ2FzZSgpXSA9IHsgc291cmNlOiAnZmFjZWJvb2snLCBjbGlja3M6IDAsIGFkZGVkOiBEYXRlLm5vdygpLCBzZWxlY3RlZDogdHJ1ZSwgcmVsYXRlZDogJycgfTtcbiAgfSxcblxuICBwdXNoTmV3TGlrZXMoKSB7XG4gICAgaWYoT2JqZWN0LmtleXModGhpcy5uZXdMaWtlcykubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5mYWNlYm9vay51bnNoaWZ0KHRoaXMubmV3TGlrZXMpO1xuICAgICAgdGhpcy5uZXdMaWtlcyA9IHt9O1xuICAgIH1cbiAgfSxcblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICBmaW5kIGFsbCBkaXZzIG1hcmtlZCB3aXRoIHRoZSBhdHRyaWJ1dGUgdmRuYXJvb3QuXG4gICBjcmVhdGUgYW4gYXJyYXkgd2l0aCBhbGwgY2hpbGRyZW4gbWFya2VkIHdpdGggdGhlXG4gICBhdHRyaWJ1dGUgdmRuYWNsYXNzLlxuICAgdGhhdCdzIHRoZSBmaXJzdCBzdGVwLCBhbnl3YXkuXG4gICB2ZG5hRGl2czogeyBkaXZOYW1lOiB7IDA6IFsgdmRuYSBvZmYgKGFsbCBkaXZzKSBdLCAxOiBbIHNvcnRlZCB2ZG5hY2xhc3MgZGl2cyBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAyOiBbIHVuc29ydGVkIHZkbmFjbGFzcyBkaXZzIF0sIDM6IFsgc29ydGVkIGFuZCB0cnVuY2F0ZWQgdmRuYWNsYXNzIGRpdnNdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICA0OiBbIHVuc29ydGVkIGJ1dCB0cnVuY2F0ZWQgdmRuYWNsYXNzIGRpdnMgXSB9LCBkaXZOYW1lOiB7IC4uLiB9IH1cbiAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIG9yaWdpbmFsVmRuYURpdnM6IHt9LFxuICB2ZG5hRGl2czoge30sXG5cbiAgX2FwcGVuZERpdnModmRuYVJvb3ROYW1lLCBudW1lcm8pIHtcbiAgICB0aGlzLnZkbmFEaXZzW3ZkbmFSb290TmFtZV1bbnVtZXJvXS5mb3JFYWNoKGZ1bmN0aW9uKGRpdikge1xuICAgICAgJChcImRpdlt2ZG5hcm9vdD0nXCIgKyB2ZG5hUm9vdE5hbWUgKyBcIiddXCIpLmFwcGVuZChkaXYpO1xuICAgIH0pO1xuICB9LFxuXG4gIHNob3dWZG5hRGl2cygpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgJChcIipbdmRuYXJvb3RdXCIpLmVhY2goZnVuY3Rpb24oaW5kZXgsIHZkbmFSb290RWwpIHtcbiAgICAgICQodmRuYVJvb3RFbCkuaHRtbCgnJyk7XG4gICAgICB2YXIgdmRuYVJvb3ROYW1lID0gJCh2ZG5hUm9vdEVsKS5hdHRyKFwidmRuYXJvb3RcIik7XG4gICAgICBjb25zb2xlLmxvZygnU29ydGluZzogJyArIHRoYXQuc29ydGluZyk7XG4gICAgICBjb25zb2xlLmxvZygnQWJvdXQgdG8gYXBwZW5kICcgKyB0aGF0LnZkbmFEaXZzW3ZkbmFSb290TmFtZV1bdGhhdC5zb3J0aW5nXS5sZW5ndGggKyAnIGRpdnMuJyk7XG4gICAgICBjb25zb2xlLmxvZyhcInZkbmFEaXZzICh3ZWlnaHRzKTogXCIgKyBKU09OLnN0cmluZ2lmeSh0aGF0LnZkbmFEaXZzW3ZkbmFSb290TmFtZV1bdGhhdC5zb3J0aW5nXS5tYXAoZnVuY3Rpb24oZGl2KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChkaXYuc3Vic3RyKGRpdi5pbmRleE9mKCd2ZG5hd2VpZ2h0JykgKyAxMiwgMikpO1xuICAgICAgfSkpKTtcbiAgICAgIHRoYXQuX2FwcGVuZERpdnModmRuYVJvb3ROYW1lLCB0aGF0LnNvcnRpbmcpO1xuICAgIH0pO1xuICB9LFxuXG4gIF93ZWlnaHRTb3J0KGEsIGIpIHtcbiAgICB2YXIgdmRuYVdlaWdodEEgPSBwYXJzZUludChhLnN1YnN0cihhLmluZGV4T2YoJ3ZkbmF3ZWlnaHQnKSArIDEyLCAyKSk7XG4gICAgdmFyIHZkbmFXZWlnaHRCID0gcGFyc2VJbnQoYi5zdWJzdHIoYi5pbmRleE9mKCd2ZG5hd2VpZ2h0JykgKyAxMiwgMikpO1xuICAgIC8vIGNvbnNvbGUubG9nKCd2ZG5hV2VpZ2h0QSA6ICcgKyB2ZG5hV2VpZ2h0QSArICcgICAgdmRuYVdlaWdodEI6ICcgKyB2ZG5hV2VpZ2h0Qik7XG4gICAgcmV0dXJuIHZkbmFXZWlnaHRCIC0gdmRuYVdlaWdodEE7XG4gIH0sXG5cbiAgZ2F0aGVyT3JpZ2luYWxWZG5hKCkge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAkKFwiKlt2ZG5hcm9vdF1cIikuZWFjaChmdW5jdGlvbihpbmRleCwgdmRuYVJvb3RFbCkge1xuICAgICAgdmFyIHZkbmFSb290TmFtZSA9ICQodmRuYVJvb3RFbCkuYXR0cihcInZkbmFyb290XCIpO1xuICAgICAgdGhhdC5vcmlnaW5hbFZkbmFEaXZzW3ZkbmFSb290TmFtZV0gPSBbXTtcbiAgICAgICQodmRuYVJvb3RFbCkuZmluZChcIipbdmRuYWNsYXNzXVwiKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCB2ZG5hQ2xhc3NFbCkge1xuICAgICAgICB0aGF0Lm9yaWdpbmFsVmRuYURpdnNbdmRuYVJvb3ROYW1lXS5wdXNoKHZkbmFDbGFzc0VsLm91dGVySFRNTCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcblxuICBnYXRoZXJWZG5hKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBpZihPYmplY3Qua2V5cyh0aGlzLm9yaWdpbmFsVmRuYURpdnMpID09PSAwKSB7XG4gICAgICB0aGlzLmdhdGhlck9yaWdpbmFsVmRuYSgpO1xuICAgIH1cblxuICAgIGxldCBtaW5WZG5hV2VpZ2h0ID0gKDUgLSB0aGlzLnByaXZhY3lTbGlkZXIpICogMjtcbiAgICBsZXQgc2VsZWN0ZWRJbnRlcmVzdHMgPSB0aGlzLmdldFNlbGVjdGVkSW50ZXJlc3RzKCk7XG4gICAgbGV0IHNlbGVjdGVkSW50ZXJlc3RLZXlzID0gT2JqZWN0LmtleXMoc2VsZWN0ZWRJbnRlcmVzdHMpO1xuICAgICQoXCIqW3ZkbmFyb290XVwiKS5lYWNoKChpbmRleCwgdmRuYVJvb3RFbCkgPT4ge1xuICAgICAgbGV0IHZkbmFSb290TmFtZSA9ICQodmRuYVJvb3RFbCkuYXR0cihcInZkbmFyb290XCIpO1xuICAgICAgY29uc29sZS5sb2coXCJWZG5hUm9vdDogXCIgKyB2ZG5hUm9vdE5hbWUpO1xuICAgICAgdGhpcy52ZG5hRGl2c1t2ZG5hUm9vdE5hbWVdID0gW107XG4gICAgICB0aGlzLnZkbmFEaXZzW3ZkbmFSb290TmFtZV1bMF0gPSBbXTtcbiAgICAgIHRoaXMudmRuYURpdnNbdmRuYVJvb3ROYW1lXVsyXSA9IFtdO1xuICAgICAgdGhpcy52ZG5hRGl2c1t2ZG5hUm9vdE5hbWVdWzRdID0gW107XG4gICAgICBjb25zb2xlLmxvZygnb3JpZ2luYWxWZG5hIENvdW50OiAoJyArIHZkbmFSb290TmFtZSArICcpOiAnICsgdGhpcy5vcmlnaW5hbFZkbmFEaXZzW3ZkbmFSb290TmFtZV0ubGVuZ3RoKTtcbiAgICAgIGZvciAobGV0IHZkbmFDbGFzc0VsU3RyIG9mIHRoaXMub3JpZ2luYWxWZG5hRGl2c1t2ZG5hUm9vdE5hbWVdKSB7XG4gICAgICAgIHRoaXMudmRuYURpdnNbdmRuYVJvb3ROYW1lXVswXS5wdXNoKHZkbmFDbGFzc0VsU3RyKTtcbiAgICAgICAgbGV0IHZkbmFDbGFzc0VsID0gJC5wYXJzZUhUTUwodmRuYUNsYXNzRWxTdHIpO1xuICAgICAgICBsZXQgdmRuYVdlaWdodCA9IHBhcnNlSW50KCQodmRuYUNsYXNzRWwpLmF0dHIoJ3ZkbmF3ZWlnaHQnKSk7XG4gICAgICAgIGxldCBzaG93ID0gJCh2ZG5hQ2xhc3NFbCkuYXR0cigndmRuYWNsYXNzJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdCgvLC8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVkdWNlKGZ1bmN0aW9uKHNob3dPckhpZGUsIGludGVyZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG93T3JIaWRlIHx8IHNlbGVjdGVkSW50ZXJlc3RLZXlzLmluZGV4T2YoaW50ZXJlc3QudHJpbSgpLnRvTG93ZXJDYXNlKCkpID4gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZhbHNlKSAmJiB2ZG5hV2VpZ2h0ID49IG1pblZkbmFXZWlnaHQ7XG4gICAgICAgIGlmKHNob3cpIHtcbiAgICAgICAgICB0aGlzLnZkbmFEaXZzW3ZkbmFSb290TmFtZV1bMl0ucHVzaCh2ZG5hQ2xhc3NFbFN0cik7XG4gICAgICAgICAgaWYodGhpcy52ZG5hRGl2c1t2ZG5hUm9vdE5hbWVdWzRdLmxlbmd0aCA8IHRoaXMudHJ1bmNhdGVMZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMudmRuYURpdnNbdmRuYVJvb3ROYW1lXVs0XS5wdXNoKHZkbmFDbGFzc0VsU3RyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICAvLyBiZWNhdXNlIEFycmF5LnByb3RvdHlwZS5zb3J0IGlzIERFU1RSVUNUSVZFIVxuICAgICAgdGhpcy52ZG5hRGl2c1t2ZG5hUm9vdE5hbWVdWzFdID0gdGhpcy52ZG5hRGl2c1t2ZG5hUm9vdE5hbWVdWzJdLnJlZHVjZSgobWVtbywgZWwpID0+IHtcbiAgICAgICAgbWVtby5wdXNoKGVsKTtcbiAgICAgICAgcmV0dXJuIG1lbW87XG4gICAgICB9LCBbXSkuc29ydCh0aGlzLl93ZWlnaHRTb3J0KTtcbiAgICAgIHRoaXMudmRuYURpdnNbdmRuYVJvb3ROYW1lXVszXSA9IHRoaXMudmRuYURpdnNbdmRuYVJvb3ROYW1lXVs0XS5yZWR1Y2UoKG1lbW8sIGVsKSA9PiB7XG4gICAgICAgIG1lbW8ucHVzaChlbCk7XG4gICAgICAgIHJldHVybiBtZW1vO1xuICAgICAgfSwgW10pLnNvcnQodGhpcy5fd2VpZ2h0U29ydCk7XG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coXCJ2ZG5hRGl2cyBTVEFUSVNUSUNTOiBcXG5cIik7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICBjb25zb2xlLmxvZyhpICsgXCI6IFwiICsgdGhpcy52ZG5hRGl2c1tcImV2ZW50c1wiXVtpXS5sZW5ndGgpO1xuICAgIH1cbiAgfVxufTtcbiJdfQ==